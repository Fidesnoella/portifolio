<%- include(`partials/header`); -%>

<section id="section">
    <div class="container">
        <!-- form--hidden -->
        <form class="form  " id="createAccount">
            <h1 class="form__title">Create Account</h1>

            <div class="form__input-group indicators">
                <input type="text" class="form__input" id="name"  placeholder="Full Name">
            <div class="name error"></div>
            </div>
            <div class="form__input-group indicators">
                <input type="text" class="form__input" id="email" placeholder="Email address">
                <div class="email error"></div>
            </div>
            <div class="form__input-group indicators">
                <input type="password" class="form__input" id="password" placeholder="Password">
                <div class="password error"></div>
            </div>
            <button class="form__button">Sign Up</button>
            <!-- <section class="socialmedia-container">
                <p>Or Sign In with:</p>
                <button id="signInWithGoogle">
                <img src="./img/google.png" width="45px" height="35px" alt="Sign in with your Google account">
                </button>
            </section> -->
            <p class="form__text">
                Already gave an account?<a href="/login" class="form__link" id="linkLogin"> Sign In</a>
            </p>
        </form>
    </div>
</section>

<script>
    const form = document.querySelector(`form`);
    const nameError = document.querySelector(`.name.error`);
    const emailError = document.querySelector(`.email.error`);
    const passwordError = document.querySelector(`.password.error`);
form.addEventListener(`submit`,async (e) =>{
    e.preventDefault();

    // get values
    const full_name= form.name.value;
    const email= form.email.value;
    const password= form.password.value;

    try{
    const res = await fetch(`http://localhost:3000/signup`, {
        method: `POST`,
        body:JSON.stringify({ full_name, email, password}),
        headers: { 'Content-Type': 'application/json' }
    });
   const data = await res.json();
   console.log(data); 
   if(data.errors){
       nameError.textContent = data.errors.full_name;
       emailError.textContent= data.errors.email;
       passwordError.textContent= data.errors.password;
   }
    }catch(err){
    console.log(err);
    }

})

</script>

<%- include(`partials/footer`); -%>